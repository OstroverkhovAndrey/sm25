# Суперкомпьютерное моделирование и технологии

Репозиторий содержит решения практического задания по курсу "Суперкомпьютерное моделирование и технологии". Решение состоит из четырех частей: последовательной, OpenMP, MPI и MPI+OpenMP. Далле описано как скомпилировать и запустить решения, с использованием планировщика задач lsf. Также в директории scrip приведены программы на python которые помогут с интерпритацией полученных результатов.

Все четыре решения примимают следующие параметры командной строки:

M и N - размер матрицы решения

delta - точность решения

print_result - если задан результат работы программы сораняется в файл (в несколкьо файлов в случае MPI программ)

count_iter - число итераций, параметр нужен для отладки, лучше использовать delta

--test - тестировать ли функции связанные с заданным вариантов задания, нужно для отладки

## Последовательный код

Код последовательной программы находится в директории sequential, команда

```bash
make
```

выполенная в директории sequential, компилирует код и соибрает исполняемый файл. Команда 

```bash
bsub < sequential_job.lsf
```

запускает полученный исполняемый файл в планировщике lfs с использованием файла запуска sequential_job.lsf.


## OpenMP

Код OpenMP программы находится в директории openmp, команда

```bash
make
```

выполенная в директории openmp, компилирует код и соибрает исполняемый файл. Команда 

```bash
bsub < openmp_job.lsf
```

запускает полученный исполняемый файл в планировщике lfs с использованием файла запуска openmp_job.lsf. Перед запуском нужно в файле запуска установить переменную окружения OMP_NUM_THREADS равной желаемому числу OpenMP нитей и выставить параметр -n равным [OMP_NUM_THREADS / 8] + 1.



## MPI

Код MPI программы находится в директории mpi, команда

```bash
make
```

выполенная в директории mpi, компилирует код и соибрает исполняемый файл. Для запуска mpi программ на ПВС IBM Polus необходимо выполнить команду

```bash
module load SpectrumMPI
```

Далее команда 

```bash
bsub < mpi_job.lsf
```

запускает полученный исполняемый файл в планировщике lfs с использованием файла запуска mpi_job.lsf. Перед запуском нужно в файле запуска установить параметр -n равным желаемому числу mpi процессов.



## MPI+OpenMP

Код MPI+OpenMP программы находится в директории mpi_openmp, команда

```bash
make
```

выполенная в директории mpi_openmp, компилирует код и соибрает исполняемый файл. Для запуска mpi программ на ПВС IBM Polus необходимо выполнить команду

```bash
module load SpectrumMPI
```

Далее команда 

```bash
bsub < mpi_openmp_job.lsf
```

запускает полученный исполняемый файл в планировщике lfs с использованием файла запуска mpi_openmp_job.lsf. Перед запуском нужно в файле запуска установить параметр -n равным желаемому числу mpi процессов и выставить переменную окружения OMP_NUM_THREADS равной желаемому числу OpenMP нитей.


### Скрипты для обработки результатов

Директория script содержит следующие прогаммы

boost.py - строит графики ускорений программ

compare.py - сравнивает два разных решения записанных в файл

join.py - объединяет файлы решения полученные mpi прогарммой в один файл

visvisualization.py - строит визуализацию решения
